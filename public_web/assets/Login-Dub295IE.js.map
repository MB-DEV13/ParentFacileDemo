{"version":3,"file":"Login-Dub295IE.js","sources":["../../src/pages/admin/Login.jsx"],"sourcesContent":["/**\r\n * Page : Connexion administrateur\r\n * -------------------------------------------------\r\n * - Utilise adminLogin() depuis services/adminApi.js\r\n * - Feedback clair : loading, erreurs, focus visibles\r\n * - Redirection vers /admin en cas de succès\r\n */\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { adminLogin } from \"../../services/adminApi\";\r\n\r\nexport default function AdminLogin() {\r\n  // États locaux du formulaire\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [err, setErr] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const navigate = useNavigate();\r\n\r\n  // Animation reveal au scroll (cohérente avec le reste du site)\r\n  useEffect(() => {\r\n    const prefersReduced = window.matchMedia(\"(prefers-reduced-motion: reduce)\").matches;\r\n    const els = document.querySelectorAll(\".js-reveal\");\r\n    if (!els.length) return;\r\n\r\n    if (prefersReduced) {\r\n      els.forEach((el) => el.classList.add(\"in-view\"));\r\n      return;\r\n    }\r\n\r\n    const io = new IntersectionObserver(\r\n      (entries) => {\r\n        entries.forEach((entry) => {\r\n          if (entry.isIntersecting) {\r\n            entry.target.classList.add(\"in-view\");\r\n            io.unobserve(entry.target);\r\n          }\r\n        });\r\n      },\r\n      { threshold: 0.1, rootMargin: \"0px 0px -10% 0px\" }\r\n    );\r\n\r\n    els.forEach((el) => io.observe(el));\r\n    return () => io.disconnect();\r\n  }, []);\r\n\r\n  async function onSubmit(e) {\r\n    e.preventDefault();\r\n    setErr(\"\");\r\n    setLoading(true);\r\n    try {\r\n      await adminLogin(email, password);\r\n      navigate(\"/admin\", { replace: true });\r\n    } catch (e) {\r\n      setErr(e.message || \"Échec de la connexion\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <main\r\n      role=\"main\"\r\n      className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-pfBlueLight to-pfPink px-4\"\r\n    >\r\n      <div className=\"w-full max-w-md\">\r\n        {/* Carte de connexion */}\r\n        <div className=\"reveal js-reveal [--delay:80ms] bg-white rounded-2xl shadow-md p-6 transition-shadow hover:shadow-lg\">\r\n          <h1 className=\"text-xl font-semibold mb-5 text-center text-slate-800\">\r\n            Connexion administrateur\r\n          </h1>\r\n\r\n          {/* Formulaire d’authentification */}\r\n          <form className=\"space-y-4\" onSubmit={onSubmit} noValidate>\r\n            {/* Email */}\r\n            <div>\r\n              <label htmlFor=\"admin-email\" className=\"text-sm font-medium text-slate-700\">\r\n                Adresse email\r\n              </label>\r\n              <input\r\n                id=\"admin-email\"\r\n                type=\"email\"\r\n                className=\"mt-1 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-pfBlue focus:border-pfBlue transition-all\"\r\n                value={email}\r\n                onChange={(e) => setEmail(e.target.value)}\r\n                autoComplete=\"username\"\r\n                required\r\n                aria-invalid={!!err}\r\n              />\r\n            </div>\r\n\r\n            {/* Mot de passe */}\r\n            <div>\r\n              <label htmlFor=\"admin-password\" className=\"text-sm font-medium text-slate-700\">\r\n                Mot de passe\r\n              </label>\r\n              <input\r\n                id=\"admin-password\"\r\n                type=\"password\"\r\n                className=\"mt-1 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-pfBlue focus:border-pfBlue transition-all\"\r\n                value={password}\r\n                onChange={(e) => setPassword(e.target.value)}\r\n                autoComplete=\"current-password\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            {/* Message d'erreur global */}\r\n            {err && (\r\n              <p\r\n                className=\"text-sm text-red-600 text-center bg-red-50 border border-red-200 rounded-lg py-2\"\r\n                role=\"alert\"\r\n              >\r\n                {err}\r\n              </p>\r\n            )}\r\n\r\n            {/* Bouton */}\r\n            <button\r\n              type=\"submit\"\r\n              disabled={loading}\r\n              className=\"w-full rounded-xl bg-pfBlue text-white px-4 py-2 text-sm font-medium shadow-sm hover:shadow-md hover:bg-pfBlue/90 transition-all disabled:opacity-60\"\r\n              aria-busy={loading}\r\n            >\r\n              {loading ? \"Connexion…\" : \"Se connecter\"}\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n\r\n\r\n"],"names":["AdminLogin","email","setEmail","useState","password","setPassword","err","setErr","loading","setLoading","navigate","useNavigate","useEffect","prefersReduced","els","el","io","entries","entry","onSubmit","e","adminLogin","jsx","jsxs"],"mappings":"4FAYA,SAAwBA,GAAa,CAEnC,KAAM,CAACC,EAAOC,CAAQ,EAAIC,EAAAA,SAAS,EAAE,EAC/B,CAACC,EAAUC,CAAW,EAAIF,EAAAA,SAAS,EAAE,EACrC,CAACG,EAAKC,CAAM,EAAIJ,EAAAA,SAAS,EAAE,EAC3B,CAACK,EAASC,CAAU,EAAIN,EAAAA,SAAS,EAAK,EAEtCO,EAAWC,EAAA,EAGjBC,EAAAA,UAAU,IAAM,CACd,MAAMC,EAAiB,OAAO,WAAW,kCAAkC,EAAE,QACvEC,EAAM,SAAS,iBAAiB,YAAY,EAClD,GAAI,CAACA,EAAI,OAAQ,OAEjB,GAAID,EAAgB,CAClBC,EAAI,QAASC,GAAOA,EAAG,UAAU,IAAI,SAAS,CAAC,EAC/C,MACF,CAEA,MAAMC,EAAK,IAAI,qBACZC,GAAY,CACXA,EAAQ,QAASC,GAAU,CACrBA,EAAM,iBACRA,EAAM,OAAO,UAAU,IAAI,SAAS,EACpCF,EAAG,UAAUE,EAAM,MAAM,EAE7B,CAAC,CACH,EACA,CAAE,UAAW,GAAK,WAAY,kBAAA,CAAmB,EAGnD,OAAAJ,EAAI,QAASC,GAAOC,EAAG,QAAQD,CAAE,CAAC,EAC3B,IAAMC,EAAG,WAAA,CAClB,EAAG,CAAA,CAAE,EAEL,eAAeG,EAASC,EAAG,CACzBA,EAAE,eAAA,EACFb,EAAO,EAAE,EACTE,EAAW,EAAI,EACf,GAAI,CACF,MAAMY,EAAWpB,EAAOG,CAAQ,EAChCM,EAAS,SAAU,CAAE,QAAS,EAAA,CAAM,CACtC,OAASU,EAAG,CACVb,EAAOa,EAAE,SAAW,uBAAuB,CAC7C,QAAA,CACEX,EAAW,EAAK,CAClB,CACF,CAEA,OACEa,EAAAA,IAAC,OAAA,CACC,KAAK,OACL,UAAU,kGAEV,eAAC,MAAA,CAAI,UAAU,kBAEb,SAAAC,EAAAA,KAAC,MAAA,CAAI,UAAU,uGACb,SAAA,CAAAD,EAAAA,IAAC,KAAA,CAAG,UAAU,wDAAwD,SAAA,2BAEtE,SAGC,OAAA,CAAK,UAAU,YAAY,SAAAH,EAAoB,WAAU,GAExD,SAAA,CAAAI,OAAC,MAAA,CACC,SAAA,CAAAD,MAAC,QAAA,CAAM,QAAQ,cAAc,UAAU,qCAAqC,SAAA,gBAE5E,EACAA,EAAAA,IAAC,QAAA,CACC,GAAG,cACH,KAAK,QACL,UAAU,iKACV,MAAOrB,EACP,SAAWmB,GAAMlB,EAASkB,EAAE,OAAO,KAAK,EACxC,aAAa,WACb,SAAQ,GACR,eAAc,CAAC,CAACd,CAAA,CAAA,CAClB,EACF,SAGC,MAAA,CACC,SAAA,CAAAgB,MAAC,QAAA,CAAM,QAAQ,iBAAiB,UAAU,qCAAqC,SAAA,eAE/E,EACAA,EAAAA,IAAC,QAAA,CACC,GAAG,iBACH,KAAK,WACL,UAAU,iKACV,MAAOlB,EACP,SAAWgB,GAAMf,EAAYe,EAAE,OAAO,KAAK,EAC3C,aAAa,mBACb,SAAQ,EAAA,CAAA,CACV,EACF,EAGCd,GACCgB,EAAAA,IAAC,IAAA,CACC,UAAU,mFACV,KAAK,QAEJ,SAAAhB,CAAA,CAAA,EAKLgB,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,SAAUd,EACV,UAAU,uJACV,YAAWA,EAEV,WAAU,aAAe,cAAA,CAAA,CAC5B,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CAGN"}