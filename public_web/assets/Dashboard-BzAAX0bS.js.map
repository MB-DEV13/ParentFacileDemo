{"version":3,"file":"Dashboard-BzAAX0bS.js","sources":["../../src/pages/admin/Dashboard.jsx"],"sourcesContent":["// src/pages/admin/Dashboard.jsx\r\n/**\r\n * Page : Admin — Dashboard\r\n * -------------------------------------------------\r\n * - Documents + 3 derniers messages via useApi\r\n * - Refresh après upload/delete/update en incrémentant un compteur\r\n * - Modale d’édition, toasts, tri inchangés\r\n */\r\n\r\nimport { useEffect, useMemo, useState } from \"react\";\r\nimport useApi from \"../../hooks/useApi\";\r\nimport {\r\n  adminDeleteDoc,\r\n  adminListDocs,\r\n  adminLogout,\r\n  adminUploadDoc,\r\n  adminUpdateDoc,\r\n  fetchAdminMessages,\r\n} from \"../../services/adminApi\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { normalizeTag, tagColor } from \"../../utils/tags\";\r\n\r\nconst TAGS = [\"Grossesse\", \"Naissance\", \"1–3 ans\"];\r\n\r\nfunction slugify(s) {\r\n  return String(s || \"\")\r\n    .normalize(\"NFD\")\r\n    .replace(/[\\u0300-\\u036f]/g, \"\")\r\n    .toLowerCase()\r\n    .replace(/[^a-z0-9]+/g, \"-\")\r\n    .replace(/(^-|-$)/g, \"\");\r\n}\r\n\r\nexport default function AdminDashboard() {\r\n  const navigate = useNavigate();\r\n\r\n  // --- Form state\r\n  const [sending, setSending] = useState(false);\r\n  const [msg, setMsg] = useState(\"\");\r\n  const [err, setErr] = useState(\"\");\r\n  const [editingDoc, setEditingDoc] = useState(null);\r\n  const [toast, setToast] = useState(\"\");\r\n\r\n  const [form, setForm] = useState({\r\n    label: \"\",\r\n    tag: \"Grossesse\",\r\n    sort_order: 999,\r\n    doc_key: \"\",\r\n    file: null,\r\n  });\r\n\r\n  function setField(k, v) {\r\n    setForm((f) => ({ ...f, [k]: v }));\r\n    setMsg(\"\");\r\n    setErr(\"\");\r\n  }\r\n\r\n  // --- Refresh flag pour recharger via useApi après mutations\r\n  const [refresh, setRefresh] = useState(0);\r\n\r\n  // --- Data via useApi\r\n  const {\r\n    data: docsData,\r\n    loading: loadingDocs,\r\n    error: errDocs,\r\n  } = useApi(adminListDocs, [refresh]);\r\n\r\n  const {\r\n    data: msgsData,\r\n    loading: loadingMsgs,\r\n    error: errMsgs,\r\n  } = useApi(() => fetchAdminMessages(3), [refresh]);\r\n\r\n  const list = useMemo(() => docsData?.documents || [], [docsData]);\r\n  const lastMsgs = useMemo(() => msgsData?.messages || [], [msgsData]);\r\n\r\n  async function onSubmit(e) {\r\n    e.preventDefault();\r\n    setErr(\"\");\r\n    setMsg(\"\");\r\n    if (!form.label || !form.doc_key || !form.file) {\r\n      setErr(\"Label, doc_key et PDF requis.\");\r\n      return;\r\n    }\r\n    try {\r\n      setSending(true);\r\n      await adminUploadDoc(form);\r\n      setMsg(\"Document ajouté !\");\r\n      setForm({\r\n        label: \"\",\r\n        tag: \"Grossesse\",\r\n        sort_order: 999,\r\n        doc_key: \"\",\r\n        file: null,\r\n      });\r\n      setRefresh((x) => x + 1);\r\n    } catch (e) {\r\n      setErr(e.message || \"Erreur ajout document\");\r\n    } finally {\r\n      setSending(false);\r\n    }\r\n  }\r\n\r\n  async function onDelete(id) {\r\n    if (!confirm(\"Supprimer ce document ?\")) return;\r\n    try {\r\n      await adminDeleteDoc(id);\r\n      setRefresh((x) => x + 1);\r\n    } catch (e) {\r\n      alert(e.message || \"Erreur suppression\");\r\n    }\r\n  }\r\n\r\n  function onEdit(doc) {\r\n    setEditingDoc({\r\n      ...doc,\r\n      sort_order: doc.order ?? doc.sort_order ?? 999,\r\n    });\r\n  }\r\n\r\n  async function onLogout() {\r\n    try {\r\n      await adminLogout();\r\n    } finally {\r\n      navigate(\"/admin/login\");\r\n    }\r\n  }\r\n\r\n  // Tri : par order puis label\r\n  const sortedDocs = useMemo(() => {\r\n    return [...(list || [])].sort((a, b) => {\r\n      const oa = a.order ?? a.sort_order ?? 999;\r\n      const ob = b.order ?? b.sort_order ?? 999;\r\n      if (oa !== ob) return oa - ob;\r\n      return String(a.label).localeCompare(String(b.label), \"fr\");\r\n    });\r\n  }, [list]);\r\n\r\n  // Animation reveal (gardée)\r\n  useEffect(() => {\r\n    const prefersReduced = window.matchMedia(\"(prefers-reduced-motion: reduce)\").matches;\r\n    const els = document.querySelectorAll(\".js-reveal\");\r\n    if (!els.length) return;\r\n\r\n    if (prefersReduced) {\r\n      els.forEach((el) => el.classList.add(\"in-view\"));\r\n      return;\r\n    }\r\n\r\n    const io = new IntersectionObserver(\r\n      (entries) => {\r\n        entries.forEach((entry) => {\r\n          if (entry.isIntersecting) {\r\n            entry.target.classList.add(\"in-view\");\r\n            io.unobserve(entry.target);\r\n          }\r\n        });\r\n      },\r\n      { threshold: 0.1, rootMargin: \"0px 0px -10% 0px\" }\r\n    );\r\n\r\n    els.forEach((el) => io.observe(el));\r\n    return () => io.disconnect();\r\n  }, [loadingDocs, loadingMsgs, sortedDocs.length, lastMsgs.length]);\r\n\r\n  return (\r\n    <main className=\"py-12 min-h-screen bg-gradient-to-br from-pfBlueLight to-pfPink\">\r\n      <div className=\"max-w-6xl mx-auto px-4\">\r\n        {/* Header */}\r\n        <div className=\"reveal js-reveal [--delay:60ms] flex items-center justify-between mb-6\">\r\n          <h1 className=\"text-2xl sm:text-3xl font-bold text-slate-800\">\r\n            Admin – Dashboard\r\n          </h1>\r\n          <button\r\n            onClick={onLogout}\r\n            className=\"rounded-xl px-3 py-1.5 text-sm border border-pfBlue text-pfBlue hover:bg-white transition\"\r\n          >\r\n            Se déconnecter\r\n          </button>\r\n        </div>\r\n\r\n        {!!toast && (\r\n          <div className=\"reveal js-reveal [--delay:100ms] mb-4 rounded-lg px-3 py-2 text-sm bg-green-50 text-green-700 border border-green-200\">\r\n            {toast}\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"grid md:grid-cols-2 gap-6 items-start\">\r\n          {/* Formulaire (gauche) — RESTAURÉ */}\r\n          <section className=\"reveal js-reveal [--delay:120ms] bg-white rounded-2xl shadow p-6\">\r\n            <h2 className=\"text-lg font-semibold mb-3\">Ajouter un PDF</h2>\r\n            <form className=\"space-y-3\" onSubmit={onSubmit}>\r\n              <div>\r\n                <label className=\"text-sm font-medium\">Titre (label)</label>\r\n                <input\r\n                  className=\"w-full rounded-xl border border-slate-300 px-3 py-2 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-pfBlue\"\r\n                  value={form.label}\r\n                  placeholder=\"Ex: Déclaration de grossesse (CPAM/CAF)\"\r\n                  onChange={(e) => {\r\n                    const v = e.target.value;\r\n                    setField(\"label\", v);\r\n                    if (!form.doc_key) setField(\"doc_key\", slugify(v));\r\n                  }}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-2 gap-3\">\r\n                <div>\r\n                  <label className=\"text-sm font-medium\">Tag</label>\r\n                  <select\r\n                    className=\"w-full rounded-xl border border-slate-300 px-3 py-2 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-pfBlue\"\r\n                    value={form.tag}\r\n                    onChange={(e) => setField(\"tag\", e.target.value)}\r\n                  >\r\n                    {TAGS.map((t) => (\r\n                      <option key={t} value={t}>\r\n                        {t}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n                <div>\r\n                  <label className=\"text-sm font-medium\">Ordre</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    className=\"w-full rounded-xl border border-slate-300 px-3 py-2 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-pfBlue\"\r\n                    value={form.sort_order}\r\n                    onChange={(e) => setField(\"sort_order\", Number(e.target.value))}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"text-sm font-medium\">Clé doc (doc_key)</label>\r\n                <input\r\n                  className=\"w-full rounded-xl border border-slate-300 px-3 py-2 text-sm font-mono bg-white focus:outline-none focus:ring-2 focus:ring-pfBlue\"\r\n                  value={form.doc_key}\r\n                  onChange={(e) => setField(\"doc_key\", slugify(e.target.value))}\r\n                  placeholder=\"ex: declaration-grossesse\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"text-sm font-medium\">Fichier PDF</label>\r\n                <input\r\n                  type=\"file\"\r\n                  accept=\"application/pdf\"\r\n                  className=\"w-full rounded-xl border border-slate-300 px-3 py-2 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-pfBlue\"\r\n                  onChange={(e) => setField(\"file\", e.target.files?.[0] || null)}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"pt-2\">\r\n                <button\r\n                  type=\"submit\"\r\n                  disabled={sending}\r\n                  className=\"rounded-xl px-4 py-2 text-sm font-medium disabled:opacity-60 shadow hover:brightness-110 transition\"\r\n                  style={{ background: \"#5784BA\", color: \"#fff\" }}\r\n                >\r\n                  {sending ? \"Envoi…\" : \"Ajouter\"}\r\n                </button>\r\n                {err && <p className=\"text-red-600 text-sm mt-2\">{err}</p>}\r\n                {msg && <p className=\"text-green-700 text-sm mt-2\">{msg}</p>}\r\n              </div>\r\n            </form>\r\n          </section>\r\n\r\n          {/* Liste (droite) */}\r\n          <section className=\"reveal js-reveal [--delay:160ms] bg-white rounded-2xl shadow p-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <h2 className=\"text-lg font-semibold mb-3 text-slate-800\">Documents</h2>\r\n              {errDocs && (\r\n                <span className=\"text-sm text-red-600\">\r\n                  {String(errDocs.message || errDocs)}\r\n                </span>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"max-h-[70vh] overflow-auto pr-1\">\r\n              {loadingDocs ? (\r\n                <p className=\"text-slate-600\">Chargement…</p>\r\n              ) : sortedDocs.length === 0 ? (\r\n                <p className=\"text-slate-600\">Aucun document.</p>\r\n              ) : (\r\n                <ul className=\"space-y-3\">\r\n                  {sortedDocs.map((d, i) => (\r\n                    <li\r\n                      key={d.id}\r\n                      className=\"reveal js-reveal rounded-2xl border p-4 bg-white shadow-sm\"\r\n                      style={{ [\"--delay\"]: `${200 + i * 50}ms` }}\r\n                    >\r\n                      <div className=\"flex items-center justify-between gap-4\">\r\n                        <div className=\"flex items-center gap-3 flex-1 min-w-0\">\r\n                          <div className=\"flex flex-col items-center\">\r\n                            <span\r\n                              className=\"text-xs font-medium rounded-md px-2 py-1 mb-1\"\r\n                              style={tagColor(d.tag)}\r\n                            >\r\n                              {normalizeTag(d.tag)}\r\n                            </span>\r\n                            <a\r\n                              href={d.public_url}\r\n                              target=\"_blank\"\r\n                              rel=\"noreferrer\"\r\n                              className=\"text-xs underline decoration-slate-400 underline-offset-2 hover:opacity-80\"\r\n                              title=\"Ouvrir le PDF dans un nouvel onglet\"\r\n                            >\r\n                              Ouvrir\r\n                            </a>\r\n                          </div>\r\n\r\n                          <div className=\"flex flex-col justify-center flex-1 min-w-0\">\r\n                            <h4 className=\"font-semibold leading-snug text-slate-800 truncate\">\r\n                              {d.label}\r\n                            </h4>\r\n                            <p className=\"text-xs text-slate-500 truncate\">\r\n                              Ordre {d.order ?? d.sort_order ?? 999}\r\n                            </p>\r\n                          </div>\r\n\r\n                          <button\r\n                            onClick={() => onEdit(d)}\r\n                            className=\"h-9 rounded-xl px-3 text-sm font-medium shrink-0 focus:outline-none focus:ring-2 focus:ring-pfBlue focus:ring-offset-1 shadow hover:brightness-110 transition\"\r\n                            style={{ background: \"#5784BA\", color: \"#fff\" }}\r\n                          >\r\n                            Modifier\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"flex justify-end mt-3\">\r\n                        <button\r\n                          onClick={() => onDelete(d.id)}\r\n                          className=\"h-9 rounded-xl px-3 text-sm border border-slate-300 hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-pfBlue focus:ring-offset-1\"\r\n                        >\r\n                          Supprimer\r\n                        </button>\r\n                      </div>\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n              )}\r\n            </div>\r\n          </section>\r\n        </div>\r\n\r\n        {/* Derniers messages reçus — RESTAURÉ */}\r\n        <section className=\"reveal js-reveal [--delay:200ms] mt-10 bg-white rounded-2xl shadow p-6\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <h3 className=\"font-semibold text-lg text-slate-800\">Derniers messages reçus</h3>\r\n            <Link to=\"/admin/messages\" className=\"text-sm underline text-pfBlue hover:opacity-80\">\r\n              Voir tous\r\n            </Link>\r\n          </div>\r\n\r\n          {loadingMsgs ? (\r\n            <p className=\"text-sm text-slate-500 mt-3\">Chargement…</p>\r\n          ) : errMsgs ? (\r\n            <p className=\"text-sm text-red-600 mt-3\">\r\n              {String(errMsgs.message || errMsgs)}\r\n            </p>\r\n          ) : (lastMsgs || []).length === 0 ? (\r\n            <p className=\"text-sm text-slate-500 mt-3\">Aucun message pour l’instant.</p>\r\n          ) : (\r\n            <ul className=\"mt-4 space-y-3\">\r\n              {lastMsgs.map((m, i) => (\r\n                <li key={m.id} className=\"reveal js-reveal rounded-xl border p-3 bg-slate-50\" style={{ [\"--delay\"]: `${240 + i * 60}ms` }}>\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div className=\"font-medium text-slate-900\">{m.subject || \"(Sans sujet)\"}</div>\r\n                    <div className=\"text-xs text-slate-500\">{new Date(m.created_at).toLocaleString(\"fr-FR\")}</div>\r\n                  </div>\r\n                  <div className=\"text-xs text-slate-600 mt-1\">\r\n                    De :{\" \"}\r\n                    <a href={`mailto:${m.email}`} className=\"font-mono underline text-pfBlue hover:opacity-80 transition\">\r\n                      {m.email}\r\n                    </a>\r\n                  </div>\r\n                  <p className=\"text-sm mt-2 line-clamp-3 text-slate-700\">{m.message}</p>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          )}\r\n        </section>\r\n      </div>\r\n\r\n      {editingDoc && (\r\n        <EditDocModal\r\n          doc={editingDoc}\r\n          onClose={() => setEditingDoc(null)}\r\n          onSaved={async () => {\r\n            setEditingDoc(null);\r\n            setToast(\"Document modifié avec succès.\");\r\n            setRefresh((x) => x + 1);\r\n            setTimeout(() => setToast(\"\"), 3000);\r\n          }}\r\n        />\r\n      )}\r\n    </main>\r\n  );\r\n}\r\n\r\n/* ---------- Modale d’édition ---------- */\r\nfunction EditDocModal({ doc, onClose, onSaved }) {\r\n  const [label, setLabel] = useState(doc.label || \"\");\r\n  const [tag, setTag] = useState(doc.tag || \"Grossesse\");\r\n  const [sortOrder, setSortOrder] = useState(doc.order ?? doc.sort_order ?? 999);\r\n  const [docKey, setDocKey] = useState(doc.doc_key || \"\");\r\n  const [file, setFile] = useState(null);\r\n  const [saving, setSaving] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    if (!docKey && label) setDocKey(slugify(label));\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [label]);\r\n\r\n  async function onSubmit(e) {\r\n    e.preventDefault();\r\n    setError(\"\");\r\n    try {\r\n      setSaving(true);\r\n      await adminUpdateDoc(doc.id, {\r\n        label,\r\n        tag,\r\n        sort_order: Number(sortOrder),\r\n        doc_key: docKey,\r\n        file,\r\n      });\r\n      onSaved?.();\r\n    } catch (e) {\r\n      setError(e.message || \"Erreur lors de la modification\");\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 bg-black/40 flex items-center justify-center p-4\">\r\n      <div className=\"bg-white rounded-2xl shadow-lg w-full max-w-lg p-6\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <h3 className=\"text-lg font-semibold text-slate-800\">Modifier le document</h3>\r\n          <button onClick={onClose} className=\"rounded-lg px-2 py-1 text-sm border border-slate-300 hover:bg-slate-50\">\r\n            Fermer\r\n          </button>\r\n        </div>\r\n\r\n        <form onSubmit={onSubmit} className=\"space-y-3\">\r\n          <div>\r\n            <label className=\"text-sm font-medium\">Titre (label)</label>\r\n            <input\r\n              className=\"w-full rounded-xl border border-slate-300 px-3 py-2 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-pfBlue\"\r\n              value={label}\r\n              onChange={(e) => setLabel(e.target.value)}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-2 gap-3\">\r\n            <div>\r\n              <label className=\"text-sm font-medium\">Tag</label>\r\n              <select\r\n                className=\"w-full rounded-xl border border-slate-300 px-3 py-2 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-pfBlue\"\r\n                value={tag}\r\n                onChange={(e) => setTag(e.target.value)}\r\n              >\r\n                {TAGS.map((t) => (\r\n                  <option key={t} value={t}>\r\n                    {t}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            <div>\r\n              <label className=\"text-sm font-medium\">Ordre</label>\r\n              <input\r\n                type=\"number\"\r\n                className=\"w-full rounded-xl border border-slate-300 px-3 py-2 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-pfBlue\"\r\n                value={sortOrder}\r\n                onChange={(e) => setSortOrder(Number(e.target.value))}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"text-sm font-medium\">Clé doc (doc_key)</label>\r\n            <input\r\n              className=\"w-full rounded-xl border border-slate-300 px-3 py-2 text-sm font-mono bg-white focus:outline-none focus:ring-2 focus:ring-pfBlue\"\r\n              value={docKey}\r\n              onChange={(e) => setDocKey(slugify(e.target.value))}\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"text-sm font-medium\">Remplacer le fichier (optionnel)</label>\r\n            <input\r\n              type=\"file\"\r\n              accept=\"application/pdf\"\r\n              className=\"w-full rounded-xl border border-slate-300 px-3 py-2 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-pfBlue\"\r\n              onChange={(e) => setFile(e.target.files?.[0] || null)}\r\n            />\r\n            <p className=\"text-xs text-slate-500 mt-1\">\r\n              Fichier actuel : <span className=\"underline\">{doc.file_name}</span>\r\n            </p>\r\n          </div>\r\n\r\n          {error && <p className=\"text-sm text-red-600\">{error}</p>}\r\n\r\n          <div className=\"pt-2 flex gap-2 justify-end\">\r\n            <button type=\"button\" onClick={onClose} className=\"rounded-xl px-3 py-2 text-sm border border-slate-300 hover:bg-slate-50\">\r\n              Annuler\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              disabled={saving}\r\n              className=\"rounded-xl px-4 py-2 text-sm font-medium disabled:opacity-60 shadow hover:brightness-110 transition\"\r\n              style={{ background: \"#5784BA\", color: \"#fff\" }}\r\n            >\r\n              {saving ? \"Enregistrement…\" : \"Enregistrer\"}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n\r\n"],"names":["TAGS","slugify","s","AdminDashboard","navigate","useNavigate","sending","setSending","useState","msg","setMsg","err","setErr","editingDoc","setEditingDoc","toast","setToast","form","setForm","setField","k","v","f","refresh","setRefresh","docsData","loadingDocs","errDocs","useApi","adminListDocs","msgsData","loadingMsgs","errMsgs","fetchAdminMessages","list","useMemo","lastMsgs","onSubmit","e","adminUploadDoc","x","onDelete","id","adminDeleteDoc","onEdit","doc","onLogout","adminLogout","sortedDocs","a","b","oa","ob","useEffect","prefersReduced","els","el","io","entries","entry","jsxs","jsx","t","d","i","tagColor","normalizeTag","Link","m","EditDocModal","onClose","onSaved","label","setLabel","tag","setTag","sortOrder","setSortOrder","docKey","setDocKey","file","setFile","saving","setSaving","error","setError","adminUpdateDoc"],"mappings":"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"}