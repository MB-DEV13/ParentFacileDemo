{"version":3,"file":"RequireAdmin-Cz33F2VK.js","sources":["../../src/components/RequireAdmin.jsx"],"sourcesContent":["/**\r\n * RequireAdmin (protection des routes Admin)\r\n * -------------------------------------------------\r\n * Vérifie si l'utilisateur est authentifié comme administrateur :\r\n * - Si la vérification est en cours → affiche un petit loader texte.\r\n * - Si non authentifié → redirige vers /admin/login.\r\n * - Si OK → rend les pages enfants via <Outlet />.\r\n */\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { Navigate, Outlet, useLocation } from \"react-router-dom\";\r\nimport { adminMe } from \"../services/adminApi\";\r\n\r\nexport default function RequireAdmin() {\r\n  const [authorized, setAuthorized] = useState(null); // null = en cours\r\n  const location = useLocation();\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n\r\n    (async () => {\r\n      try {\r\n        await adminMe();\r\n        if (isMounted) setAuthorized(true);\r\n      } catch {\r\n        if (isMounted) setAuthorized(false);\r\n      }\r\n    })();\r\n\r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, []);\r\n\r\n  // --- ÉTATS D'AFFICHAGE ---\r\n  if (authorized === null) {\r\n    // État de chargement\r\n    return (\r\n      <div className=\"min-h-[60vh] flex items-center justify-center text-slate-600\">\r\n        <div className=\"flex flex-col items-center gap-2\">\r\n          <div className=\"h-6 w-6 border-2 border-pfBlue border-t-transparent rounded-full animate-spin\"></div>\r\n          <p className=\"text-sm font-medium\">Vérification de l’accès admin…</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (authorized === false) {\r\n    // Redirection si non admin\r\n    return <Navigate to=\"/admin/login\" replace state={{ from: location }} />;\r\n  }\r\n\r\n  // Accès autorisé : rend les sous-routes\r\n  return <Outlet />;\r\n}\r\n\r\n"],"names":["RequireAdmin","authorized","setAuthorized","useState","location","useLocation","useEffect","isMounted","adminMe","jsxs","jsx","Navigate","Outlet"],"mappings":"0GAaA,SAAwBA,GAAe,CACrC,KAAM,CAACC,EAAYC,CAAa,EAAIC,EAAAA,SAAS,IAAI,EAC3CC,EAAWC,EAAA,EAoBjB,OAlBAC,EAAAA,UAAU,IAAM,CACd,IAAIC,EAAY,GAEhB,OAAC,SAAY,CACX,GAAI,CACF,MAAMC,EAAA,EACFD,KAAyB,EAAI,CACnC,MAAQ,CACFA,KAAyB,EAAK,CACpC,CACF,GAAA,EAEO,IAAM,CACXA,EAAY,EACd,CACF,EAAG,CAAA,CAAE,EAGDN,IAAe,WAGd,MAAA,CAAI,UAAU,+DACb,SAAAQ,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,+EAAA,CAAgF,EAC/FA,EAAAA,IAAC,IAAA,CAAE,UAAU,sBAAsB,SAAA,gCAAA,CAA8B,CAAA,CAAA,CACnE,CAAA,CACF,EAIAT,IAAe,GAEVS,MAACC,EAAA,CAAS,GAAG,eAAe,QAAO,GAAC,MAAO,CAAE,KAAMP,CAAA,CAAS,CAAG,QAIhEQ,EAAA,EAAO,CACjB"}