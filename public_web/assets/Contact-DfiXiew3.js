import{r as c,j as e}from"./index-DOxqnmET.js";const w="/assets/family_3-Bu5KAS9B.png",y="";function E(){const[l,p]=c.useState({email:"",subject:"",message:"",hp:""}),[t,f]=c.useState({}),[n,o]=c.useState("idle"),[g,d]=c.useState("");c.useEffect(()=>{const s=window.matchMedia("(prefers-reduced-motion: reduce)").matches,a=document.querySelectorAll(".js-reveal");if(!a.length)return;if(s){a.forEach(i=>i.classList.add("in-view"));return}const r=new IntersectionObserver(i=>{i.forEach(x=>{x.isIntersecting&&(x.target.classList.add("in-view"),r.unobserve(x.target))})},{threshold:.1,rootMargin:"0px 0px -10% 0px"});return a.forEach(i=>r.observe(i)),()=>r.disconnect()},[]);function j(s){const a={};return(!s.email||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email))&&(a.email="Email invalide"),(!s.subject||s.subject.trim().length<2)&&(a.subject="Sujet requis (min. 2 caractères)"),(!s.message||s.message.trim().length<10)&&(a.message="Message trop court (min. 10 caractères)"),s.hp&&(a.hp="bot"),a}function m(s,a){p(r=>({...r,[s]:a})),t[s]&&f(r=>({...r,[s]:void 0}))}async function b(s){s.preventDefault();const a=j(l);if(f(a),!(Object.keys(a).length>0))try{o("sending"),d("");const r=await fetch(`${y}/api/contact`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(l)}),i=await r.json().catch(()=>({}));if(!r.ok)throw new Error(i?.message||"Erreur lors de l'envoi");o("success"),d("Merci ! Votre message a bien été envoyé."),p({email:"",subject:"",message:"",hp:""})}catch(r){o("error"),d(r.message||"Erreur inconnue")}}const u="w-full rounded-xl border border-slate-300 px-3 py-2 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-pfBlue",h="text-xs text-red-600 mt-1",v=[{name:"Samu",num:"15"},{name:"Pompiers",num:"18"},{name:"Numéro d’urgence européen",num:"112"},{name:"Violences femmes info",num:"3919"},{name:"Allo Service Public",num:"39 39"},{name:"CAF",num:"32 30"}],N=[{name:"CAF",url:"https://www.caf.fr/",desc:"Prestations familiales, démarches en ligne."},{name:"Service-Public.fr",url:"https://www.service-public.fr/",desc:"Démarches administratives et fiches pratiques."},{name:"Ameli (Assurance Maladie)",url:"https://www.ameli.fr/",desc:"Droits santé, rattachement de l’enfant, remboursements."},{name:"Pajemploi (Urssaf)",url:"https://www.pajemploi.urssaf.fr/",desc:"Garde d’enfants, assistante maternelle, CMG."},{name:"monenfant.gouv.fr",url:"https://monenfant.gouv.fr/",desc:"Modes de garde, lieux d’accueil, inscription."},{name:"MSA",url:"https://www.msa.fr/",desc:"Sécurité sociale agricole (si affilié MSA)."}];return e.jsx("section",{className:"py-16 min-h-screen bg-gradient-to-br from-pfBlueLight to-pfPink",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12 reveal js-reveal",children:[e.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-slate-800",children:"Contact"}),e.jsx("p",{className:"text-slate-700 mt-1 max-w-2xl mx-auto mb-6",children:"Une question, un document manquant, une correction ? Écris-nous."}),e.jsx("div",{className:"mb-6 rounded-2xl overflow-hidden shadow-sm",children:e.jsx("img",{src:w,alt:"Famille - documents utiles",className:"w-full h-48 sm:h-56 lg:h-64 object-cover",loading:"eager",decoding:"async"})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-10 items-stretch",children:[e.jsxs("form",{className:"reveal js-reveal [--delay:60ms] bg-white rounded-2xl shadow p-6 flex flex-col h-full",onSubmit:b,noValidate:!0,"aria-labelledby":"contact-title",children:[e.jsx("h3",{id:"contact-title",className:"text-lg font-semibold text-slate-800 mb-4",children:"Nous contacter"}),e.jsxs("div",{className:"flex flex-col gap-4 flex-1",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email"}),e.jsx("input",{id:"email",name:"email",type:"email",className:`${u} ${t.email?"border-red-500":""}`,placeholder:"Votre email",value:l.email,onChange:s=>m("email",s.target.value),"aria-invalid":!!t.email,"aria-describedby":t.email?"email-error":void 0,required:!0}),t.email&&e.jsx("p",{id:"email-error",className:h,children:t.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"subject",className:"sr-only",children:"Sujet"}),e.jsx("input",{id:"subject",name:"subject",type:"text",className:`${u} ${t.subject?"border-red-500":""}`,placeholder:"Sujet",value:l.subject,onChange:s=>m("subject",s.target.value),"aria-invalid":!!t.subject,"aria-describedby":t.subject?"subject-error":void 0,required:!0}),t.subject&&e.jsx("p",{id:"subject-error",className:h,children:t.subject})]}),e.jsxs("div",{className:"flex-1 flex",children:[e.jsx("label",{htmlFor:"message",className:"sr-only",children:"Message"}),e.jsx("textarea",{id:"message",name:"message",className:`${u} flex-1 min-h-[200px] resize-none ${t.message?"border-red-500":""}`,placeholder:"Message",value:l.message,onChange:s=>m("message",s.target.value),"aria-invalid":!!t.message,"aria-describedby":t.message?"message-error":void 0,required:!0,minLength:10})]}),t.message&&e.jsx("p",{id:"message-error",className:h,children:t.message})]}),e.jsxs("div",{className:"absolute left-[-5000px] top-0","aria-hidden":"true",children:[e.jsx("label",{htmlFor:"hp",children:"Ne pas remplir"}),e.jsx("input",{id:"hp",name:"hp",type:"text",value:l.hp,onChange:s=>m("hp",s.target.value),tabIndex:-1,autoComplete:"off"})]}),e.jsxs("div",{className:"pt-2 mt-auto",children:[e.jsx("button",{type:"submit",disabled:n==="sending",className:"w-full rounded-xl bg-pfBlue text-white px-4 py-2 text-sm font-medium shadow-sm hover:shadow-md hover:bg-pfBlue/90 transition-all disabled:opacity-60 disabled:cursor-not-allowed inline-flex items-center justify-center gap-2","aria-busy":n==="sending",children:n==="sending"?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"h-4 w-4 animate-spin",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",strokeOpacity:"0.25"}),e.jsx("path",{d:"M12 2a10 10 0 0 1 10 10"})]}),"Envoi…"]}):"Envoyer"}),e.jsxs("div",{className:"mt-2 text-sm text-center",role:"status","aria-live":"polite","aria-atomic":"true",children:[n==="success"&&e.jsx("span",{className:"text-green-700",children:g}),n==="error"&&e.jsx("span",{className:"text-red-700",children:g})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"reveal js-reveal [--delay:80ms] bg-white rounded-2xl shadow p-6",children:[e.jsx("h3",{className:"font-semibold mb-4 text-slate-800 text-lg",children:"Numéros utiles"}),e.jsx("ul",{className:"grid sm:grid-cols-2 gap-3 text-sm",children:v.map((s,a)=>e.jsxs("li",{className:`card-hover p-3 flex items-center justify-between [--delay:${a*50}ms]`,children:[e.jsx("span",{children:s.name}),e.jsx("a",{href:`tel:${s.num.replace(/\s/g,"")}`,className:"font-semibold text-pfBlue hover:opacity-80 transition",title:`Composer ${s.num}`,children:s.num})]},s.name))})]}),e.jsxs("div",{className:"reveal js-reveal [--delay:120ms] bg-white rounded-2xl shadow p-6",children:[e.jsx("h3",{className:"font-semibold mb-4 text-slate-800 text-lg",children:"Sites utiles"}),e.jsx("ul",{className:"grid sm:grid-cols-2 gap-3 text-sm",children:N.map((s,a)=>e.jsxs("li",{className:`card-hover p-3 flex items-center justify-between [--delay:${a*50}ms]`,children:[e.jsxs("div",{className:"pr-3",children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-xs text-slate-600",children:s.desc})]}),e.jsx("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"shrink-0 underline font-semibold text-pfBlue hover:opacity-80 transition",title:`Ouvrir ${s.name}`,children:"Visiter"})]},s.name))})]})]})]})]})})}export{E as default};
//# sourceMappingURL=Contact-DfiXiew3.js.map
